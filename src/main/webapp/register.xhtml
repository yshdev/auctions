<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>DailyAuctions - Register</title>
    </h:head>
    <h:body>
        <h:form style="float:right; font-size:120%">
            hello visitor!
        </h:form>
        <h:outputLink value="mainMenu.xhtml"
                      style="text-decoration: none; color:black;
                      font-size:200%">DailyAuctions</h:outputLink>
        <hr/>
        <h2>Register</h2>
        
        <h:outputText rendered="#{loggedUserBean.userId != null}">You are already logged in. Logout if you want to register as another user</h:outputText>
        
        
        <h:form rendered="#{loggedUserBean.userId == null}">
            <h:panelGrid columns="4">
                <h:outputText value="User Name:"/>
                <h:inputText id="regName" required="true"
                             requiredMessage="reqired"
                             value="#{userRegistrationBean.userName}"></h:inputText>
                <h:panelGroup/> <h:panelGroup/> <h:panelGroup/>
                <h:message for="regName" style="color:red"/>
                <h:panelGroup/> <h:panelGroup/>
                <h:outputText value="Password:"/>
                <h:inputSecret id="regPassword" binding="#{passwordComponent}" required="true"
                               requiredMessage="reqired" validatorMessage="enter at least 4 characters"
                               value="#{userRegistrationBean.password}">
                    <f:validateLength minimum="4" />
                </h:inputSecret>
                <h:outputText value="Confirm:"/>
                <h:inputSecret id="regConfirm" required="#{not empty passwordComponent.value}"
                               requiredMessage="reqired" validatorMessage="confirm failed. try again"
                               value="#{userRegistrationBean.confirmPassword}">
                    <f:validator validatorId="confirmValidator" />
                    <f:attribute name="otherValue" value="#{passwordComponent.value}" />
                </h:inputSecret>
                <h:panelGroup/>
                <h:message for="regPassword" style="color:red"/>
                <h:panelGroup/>
                <h:message for="regConfirm" style="color:red"/>
                <h:outputText value="First Name:"/>
                <h:inputText id="regFirst" required="true"
                             requiredMessage="reqired"
                             value="#{userRegistrationBean.firstName}"></h:inputText>
                <h:outputText value="Last Name:"/>
                <h:inputText id="regLast" required="true"
                             requiredMessage="reqired"
                             value="#{userRegistrationBean.lastName}"></h:inputText>
                <h:panelGroup/>
                <h:message for="regFirst" style="color:red"/>
                <h:panelGroup/>
                <h:message for="regLast" style="color:red"/>
                <h:outputText value="Email:"/>
                <h:inputText id="regEmail" required="true"
                             requiredMessage="reqired"
                             value="#{userRegistrationBean.email}"
                             validatorMessage="invalid Email address">
                    <f:validateRegex pattern=
                                     "\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" />
                </h:inputText>
                <h:outputText value="Phone:"/>
                <h:inputText id="regPhone" required="true"
                             requiredMessage="reqired"
                             value="#{userRegistrationBean.phone}"
                             validatorMessage="format 02-3456789 or 050-1234567">
                    <f:validateRegex pattern=
                                     "((\d{2})|(\d{3}))-\d{7}" />
                </h:inputText>
                <h:panelGroup/>
                <h:message for="regEmail" style="color:red"/>
                <h:panelGroup/>
                <h:message for="regPhone" style="color:red"/>
            </h:panelGrid>
            <h:commandButton value="Register"
                             action="#{userRegistrationBean.register()}">
            </h:commandButton>
            <br/>
            <h:outputText value="#{userRegistrationBean.errRegisterMessage}"
                          style="color:red"/>
            <br/>
            Already Registered?
            <h:outputLink value="login.xhtml">Login</h:outputLink>
        </h:form>
    </h:body>
</html>

